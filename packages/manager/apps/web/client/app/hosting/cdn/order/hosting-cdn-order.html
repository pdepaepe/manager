<oui-back-button
    data-on-click="$ctrl.goBack()">
    <span data-translate="hosting_cdn_order_title"></span>
</oui-back-button>

<div class="text-center" data-ng-if="$ctrl.loading">
    <oui-spinner></oui-spinner>
</div>

<div data-ng-if="!$ctrl.loading">
    <oui-message
        data-ng-if="!$ctrl.isOrderable"
        data-type="error">
        <p class="m-0" data-translate="hosting_dashboard_cdn_order_not_available"></p>
    </oui-message>

    <form novalidate
        name="cdnOrder"
        data-ng-if="$ctrl.isOrderable"
        data-ng-submit="$ctrl.makeOrder()">
        <p data-translate="hosting_cdn_order_text"></p>

        <oui-field
            data-label="{{:: 'hosting_cdn_order_duration' | translate }}"
            data-size="xl">
            <oui-radio
                name="duration"
                data-ng-repeat="duration in $ctrl.durations track by $index"
                data-model="$ctrl.model.duration"
                data-value="duration"
                data-required>
                <span data-ng-bind="duration | wucDuration:'longDate'"></span>&nbsp;:&nbsp;
                <span data-ng-bind-html="$ctrl.details[duration].prices | price:$ctrl.user.ovhSubsidiary"></span>
                <oui-spinner data-size="s" data-ng-if="!$ctrl.details[duration]"></oui-spinner>
            </oui-radio>
        </oui-field>

        <p>
            <oui-checkbox
                name="contracts"
                data-ng-if="$ctrl.details[$ctrl.model.duration].contracts"
                data-model="$ctrl.model.contract"
                data-required>
                <span data-translate="hosting_cdn_order_contracts"></span>
                <span data-ng-repeat="contract in $ctrl.details[$ctrl.model.duration].contracts track by $index">
                    <span data-ng-if="!$first"
                        data-translate="hosting_cdn_order_contracts_and">
                    </span>
                    <span data-translate="hosting_cdn_order_contracts_of"></span>
                    <a target="_blank"
                        data-ng-attr-title="{{contract.name}} ({{ 'common_newtab' | translate }})"
                        data-ng-href="{{contract.url}}"
                        data-ng-bind="contract.name"></a><span data-ng-if="!$last">, </span><span data-ng-if="$last">.</span>
                </span>
            </oui-checkbox>
        </p>

        <oui-form-actions
            data-disabled="cdnOrder.$invalid"
            data-submit-text="{{:: $ctrl.submitText }}"
            data-cancel-text="{{:: 'hosting_cdn_order_cancel' | translate }}"
            data-on-cancel="$ctrl.goBack()">
        </oui-form-actions>
    </form>
</div>
